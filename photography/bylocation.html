<!doctype html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.3.1/css/ol.css" type="text/css">
		<link rel="stylesheet" href="/styles.css">
		<link rel="shortcut icon" type="image/jpg" href="/images/logo.jpg">
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.3.1/build/ol.js"></script>
    <title>Photography</title>
  </head>
  <body onload="add_map_point(40.436, 116.557);
	add_map_point(41.89, 12.492);">

		<div id="headings">
			<a href="/index.html">HOME</a>
			<a href="/about.html">ABOUT</a>
			<div class="dropdown">
				<button class="dropbtn">GALLERY</button>
				<div class="dropdown-content">
					<a href="/gallery/arttype.html">by type</a>
					<a href="/wip.html">by date</a>

					<!--<a href="/gallery/artdate.html">by date</a>-->
				</div>
			</div>
			<div class="dropdown">
				<button class="dropbtn">PHOTOGRAPHY</button>
				<div class="dropdown-content">
					<a href="/photography/bytype.html">by type</a>
					<a href="/photography/bylocation.html">by location</a>
				</div>
			</div>
		</div>

		<center>
			<h1 class="typetext">PHOTOGRAPHY (LOCATION)</h1>
			<div id="map" class="map"></div>
		</center>

    <script type="text/javascript">
			epsg4326 =  new OpenLayers.Projection("EPSG:4326"); //WGS 1984 projection
			projectTo = map.getProjectionObject(); //The map projection (Spherical Mercator)

      var map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          })
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([18.281, 32.547]),
          zoom: 2
        })
      });

			var vectorLayer = new ol.layer.Vector("Overlay");

			var feature = new ol.feature.Vector(
				new ol.geom.Point(40.436, 116.557).transform(epsg4326, projectTo),
				{description: 'Great Wall of China'},
				{externalGraphic: '/images/mapmarker.png', graphicHeight: 25, graphicWidth: 21, graphicXOffset: -12, graphicYOffset:-25}
			);
			vectorLayer.addFeatures(feature);
			map.addLayer(vectorLayer);
	 
			var controls = {
				selector: new OpenLayers.Control.SelectFeature(vectorLayer, { onSelect: createPopup, onUnselect: destroyPopup })
			};

			function createPopup(feature) {
				feature.popup = new OpenLayers.Popup.FramedCloud("pop",
					feature.geometry.getBounds().getCenterLonLat(),
					null,
					'<div class="markerContent">'+feature.attributes.description+'</div>',
					null,
					true,
					function() { controls['selector'].unselectAll(); }
				);
				//feature.popup.closeOnMove = true;
				map.addPopup(feature.popup);
			}

			function destroyPopup(feature) {
				feature.popup.destroy();
				feature.popup = null;
			}
			
			map.addControl(controls['selector']);
			controls['selector'].activate();
    </script>
  </body>
</html>
